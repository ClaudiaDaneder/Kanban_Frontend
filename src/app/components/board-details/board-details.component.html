<section *ngIf="board" class="p-32-64">

<div class="dFlex-SB">
    <h2 *ngIf="!isEditMode">{{board.title}}</h2>
    <form *ngIf="isEditMode">
          <input type="text" [(ngModel)]="board.title" name="title">
          <button type="submit" (click)="updateBoard()" class="btn btn-primary">save</button>
    </form>

    <div ngbDropdown class="d-inline-block">
           <img src="assets/img/settings.png" ngbDropdownToggle class="settings-btn">
        <div ngbDropdownMenu>
            <button ngbDropdownItem (click)="toggleEditMode()">Edit</button>
            <button ngbDropdownItem (click)="deleteBoard(board.id)">Delete</button>

        </div>
    </div>
</div>
    <div class="board-content">
        <div class="column">
            <div class="column-title dFlex-SB">
                <h3>To Do</h3>
                <button class="add-task-btn dFlex-C" (click)="openAddTaskModal(1)"><img src="assets/img/add.png"></button>
            </div>
            <div class="task-container dFlex-SB">
                @for (task of tasks; track task.id) {
                @if (task.status == '1') {
                <div class="task-card" (click)="openTaskDetailModal(task.id)">
                    <div class="dFlex-SB">
                        <b>{{task.title}}</b>
                        <div class="initials">
                            {{task.project_lead.first_name[0]}}{{task.project_lead.last_name[0]}}</div>
                    </div>
                </div>
                }
                }
            </div>
        </div>

        <div class="column">
            <div class="column-title dFlex-SB">
                <h3>Do Today</h3>
                <button class="add-task-btn dFlex-C" (click)="openAddTaskModal(2)"><img src="assets/img/add.png"></button>
            </div>
            <div class="task-container">
                @for (task of tasks; track $index) {
                @if (task.status == '2') {
                    <div class="task-card" (click)="openTaskDetailModal(task.id)">
                    <div class="dFlex-SB">
                        <b>{{task.title}}</b>
                        <div class="initials">
                            {{task.project_lead.first_name[0]}}{{task.project_lead.last_name[0]}}
                        </div>
                    </div>
                </div>
                }
                }
            </div>
        </div>

        <div class="column">
            <div class="column-title dFlex-SB">
                <h3>In Progress</h3>
                <button class="add-task-btn dFlex-C" (click)="openAddTaskModal(3)"><img src="assets/img/add.png"></button>
            </div>
            <div class="task-container">
                @for (task of tasks; track $index) {
                @if (task.status == '3') {
                    <div class="task-card" (click)="openTaskDetailModal(task.id)">
                    <div class="dFlex-SB">
                        <b>{{task.title}}</b>
                        <div class="initials">
                            {{task.project_lead.first_name[0]}}{{task.project_lead.last_name[0]}}
                        </div>
                    </div>
                </div>
                }
                }
            </div>
        </div>

        <div class="column">
            <div class="column-title dFlex-SB">
            <h3>Done</h3>
            </div>
            <div class="task-container">
                @for (task of tasks; track $index) {
                @if (task.status == '4') {
                    <div class="task-card" (click)="openTaskDetailModal(task.id)">
                    <div class="dFlex-SB">
                        <b>{{task.title}}</b>
                        <div class="initials">
                            {{task.project_lead.first_name[0]}}{{task.project_lead.last_name[0]}}
                        </div>
                    </div>
                </div>
                }
                }
            </div>
        </div>
    </div>


</section>